(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30d87b74"],{"49e5":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s}));var n=a("b775");function r(t){return Object(n["a"])({url:"/student/getNotice",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/student/setLeave",method:"post",data:t})}},"7e8a":function(t,e,a){},"83a9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"notice"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("我的通知")])]),a("div",{staticClass:"text item"},[[a("el-table",{attrs:{data:t.noticeList,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"n_id",label:"序列号",sortable:""}}),a("el-table-column",{attrs:{prop:"title",label:"主题"}}),a("el-table-column",{attrs:{prop:"type",label:"状态"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"}},[t._v("详情")])]}}])})],1)],a("el-pagination",{attrs:{"current-page":t.queryInfo.currPage,"page-sizes":[1,2,5,10],"page-size":t.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2)])],1)},r=[],s=a("5530"),c=a("1da1"),i=(a("96cf"),a("caad"),a("2532"),a("159b"),a("49e5")),o=a("2f62"),u={name:"index",created:function(){this.getNotice()},mounted:function(){var t=this;!this.socket&&this.$store.dispatch("socket/socketInit"),this.socket.wsInit(),this.socket.webSock.onmessage=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(a){var n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.socket.wsReceive(a);case 2:n=e.sent,r=n.classes,s=n.data,"notice"===s.type&&r.includes(t.classes[0])&&function(){t.$notify.success(s.msg),t.getNotice()}();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},computed:Object(s["a"])({},Object(o["b"])(["socket","classes"])),data:function(){return{queryInfo:{currPage:1,pageSize:5},total:0,noticeList:null}},methods:{getNotice:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["a"])(t.queryInfo);case 2:a=e.sent,200===a.meta.status?function(){a.data.data.forEach((function(t){t.type="未读"})),t.total=a.data.total,t.noticeList=a.data.data}():t.$notify.error(a.meta.msg);case 4:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.pageSize=t,this.getNotice()},handleCurrentChange:function(t){this.queryInfo.currPage=t,this.getNotice()}}},l=u,d=(a("e43e"),a("2877")),p=Object(d["a"])(l,n,r,!1,null,"3687bbbe",null);e["default"]=p.exports},e43e:function(t,e,a){"use strict";a("7e8a")}}]);